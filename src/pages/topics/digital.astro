---
// src/pages/topics/digital.astro
import baselayout from "../../layouts/BaseLayout.astro";
import postcard from "../../components/PostCard.astro";
import { getCollection } from "astro:content";

// 1. 抓取所有 blog 文章 [cite: 2025-12-21]
const allposts = await getCollection("blog");

// 2. 過濾出標籤包含 "technology" 的文章
const filteredposts = allposts.filter((post) => 
  post.data.tags?.some((tag: string) => tag.toLowerCase() === "technology")
);

// 網頁顯示文字首字母大寫 [cite: 2025-12-21]
const pagetitle = "Digital"; 
---

<baselayout title={pagetitle}>
  <section class="topics-section">
    <header class="section-header">
      <h1>{pagetitle}</h1>
      <p>insights into ai, software workflows, and hardware integration.</p>
    </header>
    
    <div class="post-grid">
      {filteredposts.length > 0 ? (
        filteredposts.map((post) => (
          <postcard post={post} />
        ))
      ) : (
        <p class="no-posts">no digital-related posts found yet.</p>
      )}
    </div>
  </section>
</baselayout>

<style>
  /* 程式碼維持全小寫規範 [cite: 2025-12-21] */
  .topics-section {
    padding: 80px 0;
    max-width: 1200px;
    margin: 0 auto;
    min-height: 60vh;
  }
  .section-header {
    margin-bottom: 60px;
    border-bottom: 1px solid var(--text-color-20);
    padding-bottom: 20px;
  }
  h1 {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .post-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 40px;
  }
  .no-posts {
    font-style: italic;
    color: var(--text-color-60);
  }
</style>
---
import type { HeroProps } from "@src-types/types.ts";
import ArchiveTags from "@components/ArchiveTags.astro";
import "@styles/hero.css";

const {
  title,
  description,
  is_homepage,
  is_archivepage = false,
  total_number
} = Astro.props as HeroProps;

const { globalSettings, t } = Astro.props;
---

<section class="hero-final-layout">
  <div class="hero-container-stable">
    {/* --- 26 背景層 --- */}
    <div class="hero-master-bg-text">26</div>
    
    <div class="hero-main-content">
      {/* --- 左側文字區域 --- */}
      <div class="text-side">
        <div class="title-container">
          {/* 綠點：嚴格保留位置與動畫 */}
          <span class="green-dot breathing"></span>
          
          <h1 class="hero-title-fixed">
            <div class="en-part">
              <span class="float-up" style="animation-delay: 0.1s;">E</span>
              <span class="float-up" style="animation-delay: 0.2s;">N</span>
            </div>
            <div class="route-part">
              <span class="float-up" style="animation-delay: 0.3s;">R</span>
              <span class="float-up" style="animation-delay: 0.4s;">O</span>
              <span class="float-up" style="animation-delay: 0.5s;">U</span>
              <span class="float-up" style="animation-delay: 0.6s;">T</span>
              <span class="float-up" style="animation-delay: 0.7s;">E</span>
            </div>
          </h1>
        </div>
      </div>

      {/* --- 右側圖片區域 --- */}
      <div class="image-side">
        <div class="image-box float-up-fade" style="animation-delay: 0.4s;">
          <img
            src="/my-hero.jpeg"
            alt="Hero Image"
            class="hero-img-contain" 
          />
        </div>
      </div>
    </div>

    {/* --- 底部橫線 --- */}
    <div class="hero-full-width-line"></div>
  </div>
</section>

<style>
  /* 1. 基礎容器 */
  .hero-final-layout {
      width: 100%;
      min-height: 60vh; /* 略微增加高度以適應手機垂直空間 */
      background-color: black;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden; 
      margin-top: -5vh;
      position: relative;
  }

  .hero-container-stable {
      width: 90%;
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 5;
  }

  /* 2. 背景 26 */
  .hero-master-bg-text {
      position: absolute;
      top: 50%;
      left: 10%;
      transform: translateY(-50%) scale(0.85, 1.1);
      font-size: 28vw;
      font-weight: 900;
      color: rgba(255, 255, 255, 0.15); 
      z-index: 0;
      line-height: 0.8; 
      pointer-events: none;
      user-select: none;
      white-space: nowrap;
      opacity: 0;
      animation: steadyFadeIn 1.2s ease-out 0.6s forwards;
  }

  @keyframes steadyFadeIn {
      to { opacity: 1; transform: translateY(-50%) scale(0.85, 1.1); }
  }

  /* 3. 主要排版 */
  .hero-main-content {
    display: flex;
    flex-direction: row;
    align-items: flex-end;
    justify-content: center; /* 改成 flex-start 讓圖片向左移，緊跟在文字後 */
    gap: 5vw; /* 調整這個 gap 數值，來控制圖片離文字多遠 */
    width: 100%;
    z-index: 10;
}

  /* 4. 文字與綠點 */
  .text-side {
      flex: 0 0 auto;
      position: relative;
      z-index: 15;
  }

  .hero-title-fixed {
      display: flex; 
      flex-direction: column; 
      line-height: 0.8; 
      margin: 0; 
      font-weight: 900; 
      color: white !important;
      /* 使用 clamp 確保在小螢幕字體縮小但不破壞比例 */
      font-size: clamp(60px, 14vw, 220px); 
      width: max-content;
  }
  
  /* 嚴格保留字距 */
  .en-part { 
    font-size: 0.75em; 
    letter-spacing: -0.15em; 
  }

  .route-part { 
    font-size: 1em; 
    letter-spacing: -0.15em; 
  }

  /* 綠點：位置參數嚴格固定 */
  .green-dot {
      position: absolute; 
      width: clamp(10px, 2.5vw, 40px); 
      height: clamp(10px, 2.5vw, 40px);
      background-color: #39FF14; 
      border-radius: 50%;
      z-index: 25; 
      top: 0%; 
      left: -10%; 
      box-shadow: 0 0 20px rgba(57, 255, 20, 0.8);
  }

  .breathing { animation: breathe 3s ease-in-out infinite; }
  @keyframes breathe {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.15); opacity: 0.7; }
  }

  /* 5. 圖片區域 */
  .image-side { 
      flex: 1;
      max-width: 700px;
      display: flex; 
      align-items: flex-end;
  }

  .image-box { 
      width: 100%; 
      overflow: hidden; 
      border-radius: 4px; 
      /* 保留鏡像與進場位移 */
      transform: scaleX(-1) translateY(0); 
  }
  
  .float-up-fade {
      opacity: 0;
      animation: imgEntrance 1s ease-out forwards;
  }

  @keyframes imgEntrance {
      to { opacity: 1; transform: scaleX(-1) translateY(0); }
  }

  .hero-img-contain {
      width: 100%; 
      height: auto; 
      display: block;
      transition: transform 0.6s cubic-bezier(0.33, 1, 0.68, 1);
  }

  .image-box:hover .hero-img-contain {
      transform: scale(1.1); 
  }

  /* 6. 底部橫線 */
  .hero-full-width-line {
      width: 100%; 
      height: 1px;
      background-color: rgba(255, 255, 255, 0.3); 
      margin-top: 4vh;
  }

  /* 字體上升動畫 */
  .float-up {
      display: inline-block; opacity: 0; transform: translateY(20px);
      animation: charFloatUp 0.6s ease-out forwards;
  }
  @keyframes charFloatUp { 
      to { opacity: 1; transform: translateY(0); } 
  }

  /* --- 響應式適配區 (不更動樣式，僅微調比例) --- */

  /* 平板尺寸 (如 iPad) */
  @media (max-width: 1024px) {
      .hero-container-stable { width: 92%; }
      .hero-master-bg-text { font-size: 32vw; }
      .image-side { max-width: 50%; }
  }

  /* 手機橫屏 */
  @media (max-width: 896px) and (orientation: landscape) {
      .hero-final-layout { min-height: 100vh; }
      .hero-title-fixed { font-size: 10vw; }
  }

  /* 手機直屏 (iPhone/Android) */
  @media (max-width: 500px) {
      .hero-final-layout {
          min-height: auto; /* 讓容器隨內容高度縮放，解決下方大空白問題 */
          padding: 40px 0; /* 給上下留一點間距 */
      }

      .hero-main-content { 
          flex-direction: column; /* 維持上下排版 */
          align-items: center;    /* 改為居中，手機視覺較穩定 */
          gap: 20px;              /* 縮小文字與圖片的間距 */
      }
      
      .hero-master-bg-text { 
          font-size: 60vw;        /* 背景數字大小 */
          top: 25%;               /* 往上提一點 */
          left: 50%;
          transform: translate(-50%, -50%) scale(0.85, 1.1); /* 背景數字水平置中 */
      }

      .hero-title-fixed {
          font-size: 60px;        /* 縮小字體 (從80px降到60px)，防止標題爆開換行 */
          align-items: center;    /* 讓 EN 和 ROUTE 對齊 */
          line-height: 0.85;      /* 稍微加寬行高，避免字疊太死 */
      }

      .image-side {
          width: 90%;             /* 圖片不滿版，留點邊距感覺較精緻 */
          max-width: 100%;
          margin: 0 auto;
      }

      .green-dot {
          left: 5px;              /* 改為正數，確保點點不會跑到螢幕外面 */
          top: 10%;               /* 配合新字體大小調整垂直位置 */
          width: 22px;            /* 固定手機版點的大小 */
          height: 22px;
      }

      .hero-full-width-line {
          margin-top: 20px;       /* 縮短橫線與上方內容的距離 */
      }
  }